Use GdkRectangle instead of MetaButtonSpace for backwards compatibility with
older versions of libmetacity.

Also disable checking for libmetacity-private >= 2.15.21, because it's not
needed anymore.

This patch by Thierry Reding.
Not pushed upstream.

--- a/gtk/window-decorator/gtk-window-decorator.c
+++ b/gtk/window-decorator/gtk-window-decorator.c
@@ -2803,7 +2803,7 @@
     MetaFrameFlags    flags;
     MetaTheme	      *theme;
     GdkRectangle      clip;
-    MetaButtonSpace   *space;
+    GdkRectangle      *space;
 
     theme = meta_theme_get_current ();
 
@@ -2823,10 +2823,10 @@
 	break;
     }
 
-    *x = space->clickable.x;
-    *y = space->clickable.y;
-    *w = space->clickable.width;
-    *h = space->clickable.height;
+    *x = space->x;
+    *y = space->y;
+    *w = space->width;
+    *h = space->height;
 }
 #endif
 
--- a/configure.ac
+++ b/configure.ac
@@ -228,7 +228,7 @@
     LIBS="$save_LIBS"
 
     if test "x$use_metacity" = "xyes"; then
-      PKG_CHECK_MODULES(METACITY, libmetacity-private >= 2.15.21,
+      PKG_CHECK_MODULES(METACITY, libmetacity-private,
 			[use_metacity=yes], [use_metacity=no])
     fi
 
--- a/configure
+++ b/configure
@@ -24628,12 +24628,12 @@
         pkg_cv_METACITY_CFLAGS="$METACITY_CFLAGS"
     else
         if test -n "$PKG_CONFIG" && \
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libmetacity-private >= 2.15.21\"") >&5
-  ($PKG_CONFIG --exists --print-errors "libmetacity-private >= 2.15.21") 2>&5
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libmetacity-private\"") >&5
+  ($PKG_CONFIG --exists --print-errors "libmetacity-private") 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
-  pkg_cv_METACITY_CFLAGS=`$PKG_CONFIG --cflags "libmetacity-private >= 2.15.21" 2>/dev/null`
+  pkg_cv_METACITY_CFLAGS=`$PKG_CONFIG --cflags "libmetacity-private" 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@ -24646,12 +24646,12 @@
         pkg_cv_METACITY_LIBS="$METACITY_LIBS"
     else
         if test -n "$PKG_CONFIG" && \
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libmetacity-private >= 2.15.21\"") >&5
-  ($PKG_CONFIG --exists --print-errors "libmetacity-private >= 2.15.21") 2>&5
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libmetacity-private\"") >&5
+  ($PKG_CONFIG --exists --print-errors "libmetacity-private") 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
-  pkg_cv_METACITY_LIBS=`$PKG_CONFIG --libs "libmetacity-private >= 2.15.21" 2>/dev/null`
+  pkg_cv_METACITY_LIBS=`$PKG_CONFIG --libs "libmetacity-private" 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@ -24670,9 +24670,9 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        METACITY_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libmetacity-private >= 2.15.21"`
+	        METACITY_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libmetacity-private"`
         else
-	        METACITY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libmetacity-private >= 2.15.21"`
+	        METACITY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libmetacity-private"`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$METACITY_PKG_ERRORS" >&5
