disable-libx11-xcb-support.patch
origin: http://gitweb.opencompositing.org/?p=users/3v1n0/compiz-patches;a=blob_plain;f=disable-libx11-xcb-support.patch;hb=4b8e083acf9b1779a9de43ed295b6a4a86594f10
locally modified to reflect 0.7.4 updates
Index: compiz/configure.ac
===================================================================
--- compiz.orig/configure.ac
+++ compiz/configure.ac
@@ -118,8 +118,7 @@ AC_SUBST(imagedir)
 metadatadir=$datadir/compiz
 AC_SUBST(metadatadir)
 
-COMPIZ_REQUIRES="x11-xcb    \
-		 xcomposite \
+COMPIZ_REQUIRES="xcomposite \
 		 xfixes	    \
 		 xdamage    \
 		 xrandr	    \
Index: compiz/include/compiz-core.h
===================================================================
--- compiz.orig/include/compiz-core.h
+++ compiz/include/compiz-core.h
@@ -33,7 +33,7 @@
 #include <stdio.h>
 #include <sys/time.h>
 
-#include <X11/Xlib-xcb.h>
+#include <X11/Xlib.h>
 #include <X11/Xutil.h>
 #include <X11/extensions/Xdamage.h>
 #include <X11/extensions/Xcomposite.h>
@@ -897,8 +897,6 @@ struct _CompDisplay {
 
     CompDisplay *next;
 
-    xcb_connection_t *connection;
-
     Display    *display;
     CompScreen *screens;
 
Index: compiz/src/display.c
===================================================================
--- compiz.orig/src/display.c
+++ compiz/src/display.c
@@ -2049,8 +2049,6 @@ addDisplay (const char *name)
 	return FALSE;
     }
 
-    d->connection = XGetXCBConnection (dpy);
-
     if (!compInitDisplayOptionsFromMetadata (d,
 					     &coreMetadata,
 					     coreDisplayOptionInfo,
